path.data: data
path.logs: log

elasticsearch:
  - name: source
    enabled: true
    endpoint: http://localhost:9200
    basic_auth:
      username: test
      password: testtest
  - name: target
    enabled: true
    endpoint: http://localhost:9201
    basic_auth: #used to discovery full cluster nodes, or check elasticsearch's health and versions
      username: test
      password: testtest

pipelines:
  #使用两个 scroll 任务并行读取两个索引的文档
#  - name: es_scroll_a
#    enabled: true
#    input:
#      joint: es_scroll
#      enabled: true
#      parameters:
#        indices: "medcl-test"
#        scroll_time: "10m"
##        sort_field: "id"
#        batch_size: 10000
#        slice_size: 1
#        elasticsearch: "source"
#        output_queue: "source_docs"
  - name: es_scroll_b
    enabled: true
    input:
      joint: es_scroll
      enabled: true
      parameters:
        indices: "medcl-test"
        scroll_time: "10m"
#        sort_field: "id.keyword"
        batch_size: 10000
        slice_size: 5
        elasticsearch: "target"
        output_queue: "target_docs"
  # 消费 diff 结果并保存到 Elasticsearch 用于查看两个索引的 diff 结果
#  - name: diff_result_ingest
#    enabled: true
#    start:
#      joint: json_indexing
#      enabled: true
#      parameters:
#        index_name: "diff_result"
#        index_type: "doc"
#        elasticsearch: "source"
#        input_queue: "diff_result"
#        timeout: "1s"
#        worker_size: 1
#        bulk_size_in_mb: 1 #in MB

# 进行 diff 的服务
index_diff:
  enabled: true
  diff_queue: "diff_result"
  buffer_size: 1
  text_report: true
  source:
    input_queue: 'source_docs'
  target:
    input_queue: 'target_docs'


elastic:
  elasticsearch: source
  store:
    enabled: true
  monitoring:
    enabled: false
  orm:
    enabled: true
    init_template: true
    template_name: ".gateway-default"
    index_prefix: "gateway_"

queue:
  sync_timeout_in_ms: 100000
  sync_every_records: 100000
  write_chan_buffer_size: 100000
  read_chan_buffer_size: 100000

statsd:
  enabled: true
  host: 127.0.0.1
  port: 8125
  protocol: udp
  namespace: gateway.
